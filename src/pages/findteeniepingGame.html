<!doctype html>
<html lang="ko-KR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      type="module"
      src="/src/typescript/findteenieping/findteeniepingGame.ts"
    ></script>
    <title>티니핑을 찾아라</title>
  </head>
  <body>
    <!-- http://localhost:5173/src/pages/findteeniepingGame.html -->
    <div class="main-container">
      <div class="game-info-wrapper">
        <h1 class="game-title">숨은 티니핑을 찾아라</h1>
        <div class="game-round">
          라운드: <span id="current-game-round">1</span> / 5
        </div>
      </div>
      <hr />
      <p class="game-description">루루핑은 어디로 숨었을까요?</p>
      <!--클릭해서 맞춰보세요!-->
      <div class="game-container">
        <div class="set" id="set-1">
          <!-- 티니핑 이미지 추가 후, 특정 행동 함수 구현 -->
          <img
            src="/src/assets/findteeniepingGame/ruruPing.PNG"
            alt="티니핑"
            class="teenieping"
          />
          <img
            src="/src/assets/findteeniepingGame/ruruPingCubeOpen.PNG"
            alt="티니핑 큐브"
            class="teenieping-cube"
          />
        </div>
        <div class="set" id="set-2">
          <!-- 티니핑 이미지 추가 후, 특정 행동 함수 구현 -->
          <img
            src="/src/assets/findteeniepingGame/ruruPing.PNG"
            alt="티니핑"
            class="teenieping"
          />
          <img
            src="/src/assets/findteeniepingGame/ruruPingCube.PNG"
            alt="티니핑 큐브"
            class="teenieping-cube"
          />
        </div>
        <div class="set" id="set-3">
          <!-- 티니핑 이미지 추가 후, 특정 행동 함수 구현 -->
          <img
            src="/src/assets/findteeniepingGame/ruruPing.PNG"
            alt="티니핑"
            class="teenieping"
          />
          <img
            src="/src/assets/findteeniepingGame/ruruPingCube.PNG"
            alt="티니핑 큐브"
            class="teenieping-cube"
          />
        </div>
      </div>
    </div>

    <dialog class="panel-dialog">
      <h2 class="">아쉽게 틀렸어요!</h2>
      <img src="/src/assets/findteeniepingGame/ayaPingFail.WEBP" alt="" />
      <p>다시 한 번 도전해보세요!</p>
      <button type="button" class="close-dialog">다시하기</button>
    </dialog>

    <div class="button-container">
      <button id="open-modal-button">실패 모달</button>
      <button id="change-image-button">정답 공개</button>
    </div>
  </body>

  <script>
    // 모달 창 열기
    const openDialogButton = document.querySelector('#open-modal-button');
    const closeDialogButton = document.querySelector('.close-dialog');
    const panelDialog = document.querySelector('.panel-dialog');

    const showDialog = () => panelDialog.showModal();
    const closeDialog = () => panelDialog.close();

    openDialogButton.addEventListener('click', showDialog);
    closeDialogButton.addEventListener('click', closeDialog);

    // 이미지 바꾸기
    const changeImageButton = document.querySelector('#change-image-button');
    const imgEl = document.querySelector('.teenieping-cube');

    const openSrc = '/src/assets/findteeniepingGame/ruruPingCubeOpen.PNG';
    const closeSrc = '/src/assets/findteeniepingGame/ruruPingCube.PNG';

    function changeImage(openSrc, closeSrc) {
      if (imgEl.src.endsWith('ruruPingCubeOpen.PNG'))
        imgEl.src = closeSrc; // 이미지 교체
      else imgEl.src = openSrc;
    }

    changeImageButton.addEventListener('click', () =>
      changeImage(openSrc, closeSrc),
    );
  </script>
</html>
